(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[617],{962:function(t,e,n){"use strict";var i=n(5819),r=n.n(i),a=n(1664),o=n.n(a),l=n(3055),c=n(7997),d=function(t){var e,n=t.article,i=t.feature,a=t.showDate,d=t.showReaders,s=t.first,u=void 0!==s&&s;return(0,c.BX)("li",{className:r().article,children:[(0,c.tZ)(o(),{href:(0,l.oW)(n.sourceId,i),children:(0,c.tZ)("a",{className:r().title,id:u?"first-content":null,children:n.title})}),(0,c.BX)("span",{className:r().detail,children:[" | ",(0,c.tZ)(l.$0,{section:n.sectionLabels[n.sectionLabels.length-1]})]}),a&&(0,c.BX)("span",{className:r().detail,suppressHydrationWarning:!0,children:[" | ",(0,l.qc)(n.updatedAt)]}),d&&!!parseInt(null===(e=n.trending)||void 0===e?void 0:e.numViewersSRS)&&(0,c.BX)("span",{className:r().detail,children:[" | ",Number(n.trending.numViewersSRS).toLocaleString()," read",1!==Number(n.trending.numViewersSRS)&&"s"]})]})};e.Z=function(t){var e=t.articles,n=t.feature,i=void 0===n?null:n,a=t.showDate,o=void 0!==a&&a,l=t.showReaders,s=void 0!==l&&l;return e.length&&Array.isArray(e[0])?(0,c.tZ)("div",{className:r().contentList,children:e.map((function(t,e){return(0,c.tZ)("ul",{className:r().group,children:t.map((function(t){return(null===t||void 0===t?void 0:t.sourceId)&&(0,c.tZ)(d,{article:t,feature:i,showDate:o,showReaders:s,first:0===e},t.sourceId)}))},e)}))}):(0,c.tZ)("div",{className:r().contentList,children:(0,c.tZ)("ul",{className:r().articles,children:e.map((function(t,e){return(null===t||void 0===t?void 0:t.sourceId)&&(0,c.tZ)(d,{article:t,feature:i,showDate:o,showReaders:s,first:0===e},t.sourceId)}))})})}},4301:function(t,e,n){"use strict";n.r(e),n.d(e,{__N_SSP:function(){return q},default:function(){return W}});var i=n(7726),r=n.n(i),a=n(9499),o=(n(6549),n(1720)),l=n(9294),c=n.n(l),d=n(1664),s=n.n(d),u=n(4081),p=n(9823),h=n(5675),v=n.n(h),f=n(5152),m=n.n(f),_=n(9203),g=n.n(_),b=n(9197),y=n(7997),Z=m()((function(){return Promise.all([n.e(935),n.e(753)]).then(n.bind(n,5753))}),{loading:function(){return(0,y.tZ)("p",{children:"Loading..."})},loadableGenerated:{webpack:function(){return[5753]}}}),w={polopoly_media:"Media",polopoly_image:"Image",polopoly_photogallery:"Photogallery",image:"Image",media:"Media",audio:"Audio"},N=function(t){var e,n,i,r,a,l,c,d,u,h=t.segment,f=(0,o.createRef)(),m="".concat(w[null===h||void 0===h?void 0:h.type]||"Embed"," ").concat((null===(e=h.content)||void 0===e?void 0:e.flag)||""," | ").concat(null!==(n=h.content)&&void 0!==n&&n.show?(null===(i=h.content)||void 0===i?void 0:i.show)+" : ":""," ").concat((null===(r=h.content)||void 0===r?void 0:r.title)||"Miscellaneous"),_="".concat(null!==h&&void 0!==h&&null!==(a=h.attribs)&&void 0!==a&&a.captionVisible?"Caption: "+((null===(l=h.attribs)||void 0===l?void 0:l.localCaption)||(null===(c=h.content)||void 0===c?void 0:c.description)):"").concat(null!==(d=h.content)&&void 0!==d&&d.credit?" ("+h.content.credit.trim()+")":""),N=(0,y.tZ)("p",{className:g().imageTitle,children:m}),O=(0,y.tZ)("p",{className:g().caption,children:_}),x=function(){var t,e,n=h.content.originalimage?h.content.originalimage.w:0,i=h.content.originalimage?h.content.originalimage.h:0,r=h.content.originalimageurl;if(0===n||0===i)for(var a=0,o=Object.keys(h.content.derivatives);a<o.length;a++){var l=o[a];if(l.includes("original_")){n=h.content.derivatives[l].w,i=h.content.derivatives[l].h,r=h.content.derivatives[l].fileurl;break}}var c=(0,y.tZ)("div",{"aria-expanded":"true",children:(0,y.tZ)(v(),{src:r,alt:(null===(t=h.content)||void 0===t?void 0:t.altText)||(null===(e=h.content)||void 0===e?void 0:e.title),width:n,height:i,layout:"responsive",quality:5})});(0,p.s)(f.current).render((0,y.BX)("span",{children:[(0,y.BX)("div",{className:g().embedTextBox,children:[N,O]}),(0,y.tZ)("span",{children:c})]}))},I=function(){var t,e;return null!==(t=h.content)&&void 0!==t&&t.url&&null!==(e=h.content)&&void 0!==e&&e.title?(0,y.tZ)("ul",{children:(0,y.tZ)("li",{children:(0,y.tZ)(s(),{href:h.content.url.replace(b.oH,"/story/"),children:h.content.title})})}):null},D=function(){return(0,y.tZ)("div",{className:g().embed,role:"figure",ref:f,children:(0,y.BX)("div",{className:g().embedTextBox,children:[N,O,(0,y.tZ)("button",{className:g().button,type:"button","aria-label":"Load "+m+" Button",onClick:x,children:"Load Image"})]})})},P=function(){return(0,y.tZ)("div",{className:g().embed,role:"figure","aria-label":m,children:(0,y.BX)("div",{className:g().embedTextBox,children:[N,O]})})};switch("polopoly_embed"===(null===h||void 0===h?void 0:h.type)&&"customhtml"===(null===(u=h.content)||void 0===u?void 0:u.type)&&h.content.html.includes("Transcripts may contain errors. If you wish to re-use all, or part of, a transcript")?"polopoly_transcript":null===h||void 0===h?void 0:h.type){case"polopoly_similar":return(0,y.tZ)(I,{});case"polopoly_image":case"image":return(0,y.tZ)(D,{});case"polopoly_transcript":return(0,y.tZ)(Z,{html:h.content.html});default:return(0,y.tZ)(P,{})}},O=n(3055),x=n(920),I=n(1510);function D(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(t);e&&(i=i.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,i)}return n}function P(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?D(Object(n),!0).forEach((function(e){(0,a.Z)(t,e,n[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):D(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}var k=["hr","br"],B=function(t){var e,n;return null===(e=t.attribs)||void 0===e||delete e.style,null!==(n=t.attribs)&&void 0!==n&&n.class&&(t.attribs.className=t.attribs.class,delete t.attribs.class),t.attribs?t.attribs:{}},S=function t(e,n){var i,r;if(void 0===e)return null;switch(null===e||void 0===e?void 0:e.type){case"text":return e.content.replace(/(&nbsp;)/gm,"\xa0").replace(/(&amp;)/gm,"&");case"html":var a="p"===e.tag?"div":e.tag;return"a"===a&&null!==(i=e.attribs)&&void 0!==i&&i.href&&!e.attribs.href.match(/^#/)&&(e.attribs.href.match(b.oH)?(delete e.attribs.target,e.attribs.href=e.attribs.href.replace(b.oH,"/story/")):(e.attribs.target="_blank",e.attribs.rel="noreferrer")),k.includes(a)?(0,y.tZ)(a,{},n):"a"===a&&null!==(r=e.attribs)&&void 0!==r&&r.href?e.attribs.href.match(/^#|\/story\/\d\.\d{5,}/)?(0,y.tZ)(s(),{href:e.attribs.href.split("#")[0]||"",passHref:!0,children:(0,y.tZ)(a,{children:e.content.map((function(e,i){return t(e,n+"."+i)}))},n)},n):(0,y.BX)(a,P(P({},B(e)),{},{children:[e.content.map((function(e,i){return t(e,n+"."+i)})),(0,y.tZ)(u.Z,{})]}),n):(0,y.tZ)(a,P(P({className:c().segment},B(e)),{},{children:e.content.map((function(e,i){return t(e,n+"."+i)}))}),n);case"polopoly_media":case"polopoly_image":case"polopoly_photogallery":case"polopoly_similar":case"polopoly_embed":return(0,y.tZ)(N,{segment:e},n);default:return null}},L=function(t){var e=t.body;return e&&(0,y.tZ)(y.HY,{children:e.map((function(t,e){return S(t,e)}))})},T=function(t){var e,n,i,r,a=t.articleData,o={type:null===(e=a.leadmedia)||void 0===e?void 0:e.type,content:a.leadmedia,attribs:{captionVisible:!0}},l={type:"audio",content:a.segmentmedia};return(0,y.BX)(y.HY,{children:[(0,y.tZ)("p",{children:a.deck}),((null===(n=a.leadmedia)||void 0===n?void 0:n.title)||(null===(i=a.leadmedia)||void 0===i?void 0:i.description))&&(0,y.tZ)(N,{segment:o},o.content.originalimageurl),a.segmentmedia&&(0,y.tZ)(N,{segment:l},null===(r=l.content)||void 0===r?void 0:r.title)]})},j=function(t){var e,n=t.articleData;return(0,y.tZ)("p",{className:c().date,suppressHydrationWarning:!0,children:(0,O.mH)(n.authors)+n.byline+" | Posted: "+(e=n.publishedAt,(0,I.Z)(new Date(parseInt(e)),"PPPP p")+" | Last Updated: ")+(0,O.qc)(n.updatedAt)})},X=function(t){var e;return(0,o.useEffect)((function(){return window.readJSConfig=b.I,window.readJSConfig.cb=function(){(0,x.c)(t,"READ"),window.readJS.turnOff()},window.readJS.turnOn(),function(){window.readJS.isOn()&&window.readJS.turnOff()}}),[t.articleData.sourceId]),(0,y.BX)("article",{id:"article",children:[(0,y.tZ)("h1",{className:c().title,children:null===(e=t.articleData)||void 0===e?void 0:e.title}),(0,y.tZ)(j,{articleData:t.articleData}),(0,y.tZ)(T,{articleData:t.articleData}),(0,y.tZ)(L,{body:t.articleData.body.parsed})]})},C=n(8100),E=n(995),R=n.n(E),A=n(962),H=function(t,e,n){return fetch(b.eR+b.uM,{method:"POST",headers:{"Content-Type":"application/json","User-Agent":"CBC/".concat(b.A1,"/").concat(b.q4)},body:JSON.stringify({entity:{type:"PolopolyArticle",id:t},limit:e,thresholds:{title:.1,text:.1},max_age_hours:n})}).then((function(t){return null===t||void 0===t?void 0:t.json()})).then((function(t){return t.related_entities})).catch((function(t){return(0,O.pr)(t,"related stories")}))},J=function(t,e){return t?(0,O.yl)(t,{sourceIds:e}).then((function(t){return null===t||void 0===t?void 0:t.json()})).then((function(t){return t.data.allContentItems.nodes})):[]},V=function(t){var e=function(t){var e=t.contentId,n=(0,C.ZP)([e,10,720],H).data,i=(0,C.ZP)((function(){return 10===n.length?[e,5,168]:null}),H).data;return 10!==(null===n||void 0===n?void 0:n.length)||i?null!==i&&void 0!==i&&i.length?i:null===n||void 0===n?void 0:n.slice(0,5):void 0}(t),n=[];null===e||void 0===e||e.forEach((function(t){return n.push(t.id)}));var i=(0,C.ZP)(n.length?["query ($sourceIds: String!) {\n        allContentItems(sourceIds: $sourceIds) {\n            nodes {\n                sourceId\n                title\n                sectionLabels\n                href: url\n                updatedAt\n            }\n        }\n    }",n.join(",")]:null,J).data,r=(0,y.tZ)("h2",{children:"More Stories Like This"}),a=(0,y.tZ)("p",{className:R().description,children:"We\u2019re experimenting with a new way of showing related content. These links are generated automatically based on the story you\u2019ve just read."});return!e||null!==e&&void 0!==e&&e.length&&!i?(0,y.BX)("div",{className:R().relatedLinks,children:[r,a,(0,y.tZ)("p",{children:"Loading..."})]}):(0,y.BX)("div",{className:R().relatedLinks,children:[r,a,null!==i&&void 0!==i&&i.length?(0,y.tZ)(A.Z,{articles:(0,O.iS)(n,i),feature:"related-link",showDate:!0}):(0,y.tZ)("p",{children:"No recent related content found."})]})},q=!0,W=function(t){var e=(0,O.lx)(t);return e||(0,y.BX)("div",{className:r().story,children:[(0,y.tZ)(X,{articleData:t.articleData}),(0,y.tZ)(V,{contentId:t.articleData.sourceId})]})}},9771:function(t,e,n){(window.__NEXT_P=window.__NEXT_P||[]).push(["/story/[[...index]]",function(){return n(4301)}])},9294:function(t){t.exports={segment:"article_segment__qxlIg",title:"article_title__pimxw",date:"article_date__u_RK6"}},5819:function(t){t.exports={contentList:"contentlist_contentList__XkqrV",group:"contentlist_group__Qt3yP",articles:"contentlist_articles__K4HF_",article:"contentlist_article__bOBk0",title:"contentlist_title__J4GzV",detail:"contentlist_detail__wQuW2"}},9203:function(t){t.exports={embed:"embed_embed__GHDE5",embedTextBox:"embed_embedTextBox__T2ac0",imageTitle:"embed_imageTitle__2T8pf",caption:"embed_caption__e9_Vd"}},995:function(t){t.exports={relatedLinks:"relatedlinks_relatedLinks__R7iob",description:"relatedlinks_description__h_GJ8"}},7726:function(t){t.exports={story:"story_story__W1_Ir"}}},function(t){t.O(0,[774,100,629,888,179],(function(){return e=9771,t(t.s=e);var e}));var e=t.O();_N_E=e}]);